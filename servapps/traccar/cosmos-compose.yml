# Configuration for traccar setup

# Name of the big-bear-traccar application
name: big-bear-traccar
# Service definitions for the big-bear-traccar application
services:
  # Service name: app
  app:
    image: traccar/traccar:6.10-ubuntu # Specifies the docker image to use for this service. Using the latest version of the traccar image.
    container_name: traccar # Name of the container that will be created
    hostname: traccar # Hostname of the container
    restart: unless-stopped # Restart policy. The container will restart unless it's explicitly stopped.
    ports: # Ports mapping from the host to the container
      - "8080:8082" # Maps port 8080 on the host to port 8082 in the container
      - "5000-5150:5000-5150" # Maps ports range 5000-5150 on the host to the same range in the container for TCP
      - "5000-5150:5000-5150/udp" # Maps ports range 5000-5150 on the host to the same range in the container for UDP
    volumes: # Defines volume mounts for the container
      - "traccar_logs:/opt/traccar/logs" # Mounts the logs directory from the host to the container with read and write permissions
      - "traccar_traccar.xml:/opt/traccar/conf/traccar.xml" # Mounts the traccar.xml config file from the host to the container with read-only permissions
volumes:
  traccar_logs: {}
  traccar_traccar.xml: {}

# Cosmos-specific routes for reverse proxy
routes:
  - name: traccar
    description: Traccar
    useHost: true
    target: http://localhost:8080
    mode: SERVAPP
    Timeout: 14400000
    ThrottlePerMinute: 0
    BlockCommonBots: false
    BlockAPIAbuse: false
